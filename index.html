<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Checkbook">
  <title>Checkbook Register</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      -webkit-font-smoothing: antialiased;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function CheckbookRegister() {
      const [transactions, setTransactions] = useState([]);
      const [recurringTransactions, setRecurringTransactions] = useState([]);
      const [showAddModal, setShowAddModal] = useState(false);
      const [showRecurringModal, setShowRecurringModal] = useState(false);
      const [editingTransaction, setEditingTransaction] = useState(null);
      const [showClearedOnly, setShowClearedOnly] = useState(false);
      const [showRecurringList, setShowRecurringList] = useState(false);
      const [editingRecurring, setEditingRecurring] = useState(null);
      const [showClearedBalance, setShowClearedBalance] = useState(false);
      const [needsStartingBalance, setNeedsStartingBalance] = useState(false);
      const [startingBalanceAmount, setStartingBalanceAmount] = useState('');
      const [newTransaction, setNewTransaction] = useState({
        date: new Date().toISOString().split('T')[0],
        payee: '',
        amount: '',
        memo: '',
        cleared: false,
        isDeposit: false
      });
      const [newRecurring, setNewRecurring] = useState({
        payee: '',
        amount: '',
        memo: '',
        frequency: 'monthly',
        startDate: new Date().toISOString().split('T')[0],
        isDeposit: false
      });

      useEffect(() => {
        const savedTransactions = localStorage.getItem('checkbook_transactions');
        const savedRecurring = localStorage.getItem('checkbook_recurring');
        
        if (savedTransactions) {
          const loadedTransactions = JSON.parse(savedTransactions);
          setTransactions(loadedTransactions);
          const hasStartingBalance = loadedTransactions.some(t => t.isStartingBalance);
          if (!hasStartingBalance && loadedTransactions.length === 0) {
            setNeedsStartingBalance(true);
          }
        } else {
          setNeedsStartingBalance(true);
        }
        if (savedRecurring) setRecurringTransactions(JSON.parse(savedRecurring));
      }, []);

      useEffect(() => {
        localStorage.setItem('checkbook_transactions', JSON.stringify(transactions));
        localStorage.setItem('checkbook_recurring', JSON.stringify(recurringTransactions));
        generateRecurringTransactions();
      }, [transactions, recurringTransactions]);

      const generateRecurringTransactions = () => {
        const today = new Date();
        const thirtyDaysFromNow = new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000);
        
        recurringTransactions.forEach(recurring => {
          let currentDate = new Date(recurring.startDate);
          
          while (currentDate <= thirtyDaysFromNow) {
            const dateStr = currentDate.toISOString().split('T')[0];
            const exists = transactions.some(t => 
              t.recurringId === recurring.id && t.date === dateStr
            );
            
            if (!exists && currentDate >= today) {
              const newTrans = {
                id: Date.now() + Math.random(),
                date: dateStr,
                payee: recurring.payee,
                amount: recurring.amount,
                memo: recurring.memo,
                cleared: false,
                isDeposit: recurring.isDeposit,
                recurringId: recurring.id
              };
              setTransactions(prev => [...prev, newTrans]);
            }
            
            if (recurring.frequency === 'monthly') {
              currentDate.setMonth(currentDate.getMonth() + 1);
            } else if (recurring.frequency === 'bi-weekly') {
              currentDate.setDate(currentDate.getDate() + 14);
            }
          }
        });
      };

      const calculateBalance = () => {
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        let total = 0;
        transactions.forEach(t => {
          const transDate = new Date(t.date);
          transDate.setHours(0, 0, 0, 0);
          
          if (transDate <= today) {
            const amount = parseFloat(t.amount) || 0;
            if (t.isStartingBalance || t.isDeposit) {
              total += amount;
            } else {
              total -= amount;
            }
          }
        });
        return total;
      };

      const calculateClearedBalance = () => {
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        let total = 0;
        transactions.filter(t => t.cleared).forEach(t => {
          const transDate = new Date(t.date);
          transDate.setHours(0, 0, 0, 0);
          
          if (transDate <= today) {
            const amount = parseFloat(t.amount) || 0;
            if (t.isStartingBalance || t.isDeposit) {
              total += amount;
            } else {
              total -= amount;
            }
          }
        });
        return total;
      };

      const calculateUnclearedBalance = () => {
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        let total = 0;
        transactions.filter(t => !t.cleared).forEach(t => {
          const transDate = new Date(t.date);
          transDate.setHours(0, 0, 0, 0);
          
          if (transDate <= today) {
            const amount = parseFloat(t.amount) || 0;
            if (t.isStartingBalance || t.isDeposit) {
              total += amount;
            } else {
              total -= amount;
            }
          }
        });
        return total;
      };

      const addStartingBalance = () => {
        if (!startingBalanceAmount) return;
        
        const startingBalanceTransaction = {
          id: Date.now(),
          date: new Date().toISOString().split('T')[0],
          payee: 'Starting Balance',
          amount: parseFloat(startingBalanceAmount),
          memo: 'Initial account balance',
          cleared: true,
          isDeposit: false,
          isStartingBalance: true
        };
        
        setTransactions([startingBalanceTransaction]);
        setStartingBalanceAmount('');
        setNeedsStartingBalance(false);
      };

      const addTransaction = () => {
        if (!newTransaction.payee || !newTransaction.amount) return;
        
        const transaction = {
          id: Date.now(),
          ...newTransaction,
          amount: parseFloat(newTransaction.amount)
        };
        
        setTransactions([...transactions, transaction]);
        setNewTransaction({
          date: new Date().toISOString().split('T')[0],
          payee: '',
          amount: '',
          memo: '',
          cleared: false,
          isDeposit: false
        });
        setShowAddModal(false);
      };

      const addRecurringTransaction = () => {
        if (!newRecurring.payee || !newRecurring.amount) return;
        
        const recurring = {
          id: Date.now(),
          ...newRecurring,
          amount: parseFloat(newRecurring.amount)
        };
        
        setRecurringTransactions([...recurringTransactions, recurring]);
        setNewRecurring({
          payee: '',
          amount: '',
          memo: '',
          frequency: 'monthly',
          startDate: new Date().toISOString().split('T')[0],
          isDeposit: false
        });
        setShowRecurringModal(false);
      };

      const updateTransaction = () => {
        setTransactions(transactions.map(t => 
          t.id === editingTransaction.id ? editingTransaction : t
        ));
        setEditingTransaction(null);
      };

      const deleteTransaction = (id) => {
        setTransactions(transactions.filter(t => t.id !== id));
      };

      const deleteRecurring = (id) => {
        setRecurringTransactions(recurringTransactions.filter(r => r.id !== id));
        setTransactions(transactions.filter(t => t.recurringId !== id));
      };

      const updateRecurring = () => {
        setRecurringTransactions(recurringTransactions.map(r => 
          r.id === editingRecurring.id ? editingRecurring : r
        ));
        setEditingRecurring(null);
      };

      const toggleCleared = (id) => {
        setTransactions(transactions.map(t => 
          t.id === id ? { ...t, cleared: !t.cleared } : t
        ));
      };

      const calculateRunningBalance = (upToIndex) => {
        let runningBalance = 0;
        for (let i = sortedTransactions.length - 1; i >= upToIndex; i--) {
          const t = sortedTransactions[i];
          const amount = parseFloat(t.amount) || 0;
          if (t.isStartingBalance || t.isDeposit) {
            runningBalance += amount;
          } else {
            runningBalance -= amount;
          }
        }
        return runningBalance;
      };

      const sortedTransactions = [...transactions].sort((a, b) => 
        new Date(b.date) - new Date(a.date)
      );

      const displayTransactions = showClearedOnly 
        ? sortedTransactions.filter(t => t.cleared)
        : sortedTransactions;

      return (
        <div className="min-h-screen bg-gray-50">
          <div className="max-w-4xl mx-auto">
            {needsStartingBalance && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg p-6 max-w-md w-full">
                  <h2 className="text-2xl font-bold mb-4">Set Starting Balance</h2>
                  <p className="text-gray-600 mb-4">Enter your current account balance to get started.</p>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-1">Starting Balance</label>
                      <input
                        type="number"
                        value={startingBalanceAmount}
                        onChange={(e) => setStartingBalanceAmount(e.target.value)}
                        className="w-full border rounded px-3 py-2"
                        placeholder="0.00"
                        step="0.01"
                        autoFocus
                      />
                    </div>
                    <button
                      onClick={addStartingBalance}
                      className="w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
                      disabled={!startingBalanceAmount}
                    >
                      Continue
                    </button>
                  </div>
                </div>
              </div>
            )}

            <div className="bg-white shadow-md p-6 mb-4">
              <h1 className="text-3xl font-bold text-gray-800 mb-4">Checkbook Register</h1>
              
              <div className="space-y-3">
                <div className="flex items-center justify-between border-b pb-3">
                  <div className="flex items-center gap-3">
                    <span className="text-2xl font-bold text-gray-700">
                      {showClearedBalance ? 'Cleared Balance:' : 'Current Balance:'}
                    </span>
                    <button
                      onClick={() => setShowClearedBalance(!showClearedBalance)}
                      className="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200"
                    >
                      Toggle
                    </button>
                  </div>
                  <span className={`text-3xl font-bold ${
                    (showClearedBalance ? calculateClearedBalance() : calculateBalance()) >= 0 
                      ? 'text-green-600' 
                      : 'text-red-600'
                  }`}>
                    ${(showClearedBalance ? calculateClearedBalance() : calculateBalance()).toFixed(2)}
                  </span>
                </div>

                <div className="grid grid-cols-2 gap-4 pt-3">
                  <div>
                    <span className="text-sm text-gray-600">Cleared Total:</span>
                    <div className="text-lg font-semibold text-green-600">
                      ${calculateClearedBalance().toFixed(2)}
                    </div>
                  </div>
                  <div>
                    <span className="text-sm text-gray-600">Uncleared Total:</span>
                    <div className="text-lg font-semibold text-orange-600">
                      ${calculateUnclearedBalance().toFixed(2)}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div className="flex gap-3 mb-4 overflow-x-auto px-4">
              <button
                onClick={() => setShowAddModal(true)}
                className="flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 shadow-md whitespace-nowrap"
              >
                <span>+</span>
                Add Transaction
              </button>
              <button
                onClick={() => setShowRecurringModal(true)}
                className="flex items-center gap-2 bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 shadow-md whitespace-nowrap"
              >
                <span>üìÖ</span>
                Add Recurring
              </button>
              <button
                onClick={() => setShowRecurringList(true)}
                className="flex items-center gap-2 bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600 shadow-md whitespace-nowrap"
              >
                <span>üìÖ</span>
                Manage ({recurringTransactions.length})
              </button>
              <button
                onClick={() => setShowClearedOnly(!showClearedOnly)}
                className={`flex items-center gap-2 px-4 py-2 rounded-lg shadow-md whitespace-nowrap ${
                  showClearedOnly ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-700'
                }`}
              >
                <span>‚úì</span>
                {showClearedOnly ? 'Show All' : 'Cleared Only'}
              </button>
            </div>

            <div className="bg-white rounded-lg shadow-md overflow-hidden">
              {displayTransactions.length === 0 ? (
                <div className="p-8 text-center text-gray-500">
                  No transactions yet. Add your first transaction to get started!
                </div>
              ) : (
                <div className="divide-y">
                  {displayTransactions.map((transaction, index) => (
                    <div key={transaction.id} className="p-4 hover:bg-gray-50">
                      <div className="flex items-start justify-between">
                        <div className="flex items-start gap-3 flex-1">
                          <button
                            onClick={() => toggleCleared(transaction.id)}
                            className={`mt-1 w-6 h-6 rounded border-2 flex items-center justify-center ${
                              transaction.cleared 
                                ? 'bg-green-500 border-green-500' 
                                : 'border-gray-300 hover:border-green-500'
                            }`}
                          >
                            {transaction.cleared && <span className="text-white text-sm">‚úì</span>}
                          </button>
                          
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1 flex-wrap">
                              <span className="font-semibold text-gray-800">{transaction.payee}</span>
                              <span className="text-sm text-gray-500">{transaction.date}</span>
                              {transaction.recurringId && (
                                <span className="text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded">
                                  Recurring
                                </span>
                              )}
                              {transaction.isStartingBalance && (
                                <span className="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">
                                  Starting Balance
                                </span>
                              )}
                            </div>
                            {transaction.memo && (
                              <div className="text-sm text-gray-600">{transaction.memo}</div>
                            )}
                          </div>
                        </div>
                        
                        <div className="flex items-center gap-3">
                          <div className="text-right">
                            <div className={`text-lg font-bold ${
                              transaction.isStartingBalance 
                                ? 'text-blue-600'
                                : transaction.isDeposit 
                                  ? 'text-green-600' 
                                  : 'text-red-600'
                            }`}>
                              {transaction.isStartingBalance 
                                ? `$${transaction.amount.toFixed(2)}`
                                : `${transaction.isDeposit ? '+' : '-'}$${transaction.amount.toFixed(2)}`
                              }
                            </div>
                            <div className="text-sm text-gray-600">
                              Balance: ${calculateRunningBalance(index).toFixed(2)}
                            </div>
                          </div>
                          {!transaction.isStartingBalance && (
                            <>
                              <button
                                onClick={() => setEditingTransaction({...transaction})}
                                className="text-blue-500 hover:text-blue-700 p-1"
                              >
                                ‚úèÔ∏è
                              </button>
                              <button
                                onClick={() => deleteTransaction(transaction.id)}
                                className="text-red-500 hover:text-red-700 p-1"
                              >
                                üóëÔ∏è
                              </button>
                            </>
                          )}
                          {transaction.isStartingBalance && (
                            <button
                              onClick={() => setEditingTransaction({...transaction})}
                              className="text-blue-500 hover:text-blue-700 p-1"
                            >
                              ‚úèÔ∏è
                            </button>
                          )}
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {showAddModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto">
                  <h2 className="text-2xl font-bold mb-4">Add Transaction</h2>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-1">Date</label>
                      <input
                        type="date"
                        value={newTransaction.date}
                        onChange={(e) => setNewTransaction({...newTransaction, date: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Payee</label>
                      <input
                        type="text"
                        value={newTransaction.payee}
                        onChange={(e) => setNewTransaction({...newTransaction, payee: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                        placeholder="Who did you pay?"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Amount</label>
                      <input
                        type="number"
                        value={newTransaction.amount}
                        onChange={(e) => setNewTransaction({...newTransaction, amount: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                        placeholder="0.00"
                        step="0.01"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Memo</label>
                      <input
                        type="text"
                        value={newTransaction.memo}
                        onChange={(e) => setNewTransaction({...newTransaction, memo: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                        placeholder="Optional notes"
                      />
                    </div>
                    <div className="flex items-center gap-2">
                      <input
                        type="checkbox"
                        checked={newTransaction.isDeposit}
                        onChange={(e) => setNewTransaction({...newTransaction, isDeposit: e.target.checked})}
                        className="w-4 h-4"
                      />
                      <label className="text-sm font-medium">This is a deposit</label>
                    </div>
                    <div className="flex gap-2">
                      <button
                        onClick={addTransaction}
                        className="flex-1 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
                      >
                        Add
                      </button>
                      <button
                        onClick={() => setShowAddModal(false)}
                        className="flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {showRecurringModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto">
                  <h2 className="text-2xl font-bold mb-4">Add Recurring Transaction</h2>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-1">Payee</label>
                      <input
                        type="text"
                        value={newRecurring.payee}
                        onChange={(e) => setNewRecurring({...newRecurring, payee: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Amount</label>
                      <input
                        type="number"
                        value={newRecurring.amount}
                        onChange={(e) => setNewRecurring({...newRecurring, amount: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                        step="0.01"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Memo</label>
                      <input
                        type="text"
                        value={newRecurring.memo}
                        onChange={(e) => setNewRecurring({...newRecurring, memo: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Frequency</label>
                      <select
                        value={newRecurring.frequency}
                        onChange={(e) => setNewRecurring({...newRecurring, frequency: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      >
                        <option value="bi-weekly">Bi-Weekly (Every 14 days)</option>
                        <option value="monthly">Monthly</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Start Date</label>
                      <input
                        type="date"
                        value={newRecurring.startDate}
                        onChange={(e) => setNewRecurring({...newRecurring, startDate: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div className="flex items-center gap-2">
                      <input
                        type="checkbox"
                        checked={newRecurring.isDeposit}
                        onChange={(e) => setNewRecurring({...newRecurring, isDeposit: e.target.checked})}
                        className="w-4 h-4"
                      />
                      <label className="text-sm font-medium">This is a deposit</label>
                    </div>
                    <div className="flex gap-2">
                      <button
                        onClick={addRecurringTransaction}
                        className="flex-1 bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600"
                      >
                        Add
                      </button>
                      <button
                        onClick={() => setShowRecurringModal(false)}
                        className="flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {showRecurringList && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                  <h2 className="text-2xl font-bold mb-4">Manage Recurring Transactions</h2>
                  {recurringTransactions.length === 0 ? (
                    <div className="p-8 text-center text-gray-500">
                      No recurring transactions yet.
                    </div>
                  ) : (
                    <div className="space-y-3">
                      {recurringTransactions.map(recurring => (
                        <div key={recurring.id} className="border rounded-lg p-4 hover:bg-gray-50">
                          <div className="flex items-start justify-between">
                            <div className="flex-1">
                              <div className="font-semibold text-lg text-gray-800">
                                {recurring.payee}
                              </div>
                              <div className="text-sm text-gray-600 mt-1">
                                <div>Amount: <span className={`font-semibold ${recurring.isDeposit ? 'text-green-600' : 'text-red-600'}`}>
                                  {recurring.isDeposit ? '+' : '-'}${recurring.amount.toFixed(2)}
                                </span></div>
                                <div>Frequency: <span className="font-medium">{recurring.frequency}</span></div>
                                <div>Start Date: {recurring.startDate}</div>
                                {recurring.memo && <div>Memo: {recurring.memo}</div>}
                              </div>
                            </div>
                            <div className="flex gap-2">
                              <button
                                onClick={() => setEditingRecurring({...recurring})}
                                className="text-blue-500 hover:text-blue-700 p-1"
                              >
                                ‚úèÔ∏è
                              </button>
                              <button
                                onClick={() => {
                                  if (confirm('Delete this recurring transaction? This will also remove all future instances.')) {
                                    deleteRecurring(recurring.id);
                                  }
                                }}
                                className="text-red-500 hover:text-red-700 p-1"
                              >
                                üóëÔ∏è
                              </button>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  <div className="mt-4">
                    <button
                      onClick={() => setShowRecurringList(false)}
                      className="w-full bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"
                    >
                      Close
                    </button>
                  </div>
                </div>
              </div>
            )}

            {editingTransaction && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto">
                  <h2 className="text-2xl font-bold mb-4">Edit Transaction</h2>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-1">Date</label>
                      <input
                        type="date"
                        value={editingTransaction.date}
                        onChange={(e) => setEditingTransaction({...editingTransaction, date: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Payee</label>
                      <input
                        type="text"
                        value={editingTransaction.payee}
                        onChange={(e) => setEditingTransaction({...editingTransaction, payee: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Amount</label>
                      <input
                        type="number"
                        value={editingTransaction.amount}
                        onChange={(e) => setEditingTransaction({...editingTransaction, amount: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                        step="0.01"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Memo</label>
                      <input
                        type="text"
                        value={editingTransaction.memo}
                        onChange={(e) => setEditingTransaction({...editingTransaction, memo: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    {!editingTransaction.isStartingBalance && (
                      <div className="flex items-center gap-2">
                        <input
                          type="checkbox"
                          checked={editingTransaction.isDeposit}
                          onChange={(e) => setEditingTransaction({...editingTransaction, isDeposit: e.target.checked})}
                          className="w-4 h-4"
                        />
                        <label className="text-sm font-medium">This is a deposit</label>
                      </div>
                    )}
                    <div className="flex gap-2">
                      <button
                        onClick={updateTransaction}
                        className="flex-1 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
                      >
                        Save
                      </button>
                      <button
                        onClick={() => setEditingTransaction(null)}
                        className="flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {editingRecurring && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto">
                  <h2 className="text-2xl font-bold mb-4">Edit Recurring Transaction</h2>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-1">Payee</label>
                      <input
                        type="text"
                        value={editingRecurring.payee}
                        onChange={(e) => setEditingRecurring({...editingRecurring, payee: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Amount</label>
                      <input
                        type="number"
                        value={editingRecurring.amount}
                        onChange={(e) => setEditingRecurring({...editingRecurring, amount: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                        step="0.01"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Memo</label>
                      <input
                        type="text"
                        value={editingRecurring.memo}
                        onChange={(e) => setEditingRecurring({...editingRecurring, memo: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Frequency</label>
                      <select
                        value={editingRecurring.frequency}
                        onChange={(e) => setEditingRecurring({...editingRecurring, frequency: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      >
                        <option value="bi-weekly">Bi-Weekly (Every 14 days)</option>
                        <option value="monthly">Monthly</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">Start Date</label>
                      <input
                        type="date"
                        value={editingRecurring.startDate}
                        onChange={(e) => setEditingRecurring({...editingRecurring, startDate: e.target.value})}
                        className="w-full border rounded px-3 py-2"
                      />
                    </div>
                    <div className="flex items-center gap-2">
                      <input
                        type="checkbox"
                        checked={editingRecurring.isDeposit}
                        onChange={(e) => setEditingRecurring({...editingRecurring, isDeposit: e.target.checked})}
                        className="w-4 h-4"
                      />
                      <label className="text-sm font-medium">This is a deposit</label>
                    </div>
                    <div className="flex gap-2">
                      <button
                        onClick={updateRecurring}
                        className="flex-1 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
                      >
                        Save
                      </button>
                      <button
                        onClick={() => setEditingRecurring(null)}
                        className="flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.render(<CheckbookRegister />, document.getElementById('app'));
  </script>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>
